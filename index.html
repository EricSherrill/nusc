<!DOCTYPE html>
<html lang="en" ng-app="app">

  <head>
    <head>
      <script data-require="angular.js@1.3.15" data-semver="1.3.15" src="https://code.angularjs.org/1.3.15/angular.js"></script>
      <link rel="stylesheet" href="style.css" />
      <script src="arrays.js"></script>
      <script src="math.js"></script>
      <script src="main.js"></script>
  </head>

  <body ng-controller="MainController">

    <h1>NetApp Usable Space Calculator</h1>


    <div class="container"> <!-- Calculator.html -->

      <!-- INPUTS -->

      <label for="totalDrives">Total Drives:</label>
      <input type="number" min="0" max="240" name="totalDrives" ng-model="totalDrives">
      <br>

      <label for="spareDrives">Spare Drives:</label>
      <input type="number" min="0" max="14" name="spareDrives" ng-model="spareDrives">
      <br>

      <label for="rootDrives">Root Drives:</label>
      <input type="number" name="rootDrives" ng-model="rootDrives">
      <br>

      <label for="rgSize">Raid Group Size:</label>
      <input type="number" name="rgSize" ng-model="rgSize">
      <!-- add default, max, min and custom options to auto-select rgSize -->

      <form name="rgSizeForm">
        <label for"rgSizeMin">
          <input id="rgSizeMin" type="radio" name="rgSize" ng-value="rgSizeMin()" ng-model="rgSize">
        Min
        </label>
        <label for"rgSizeDefault">
          <input id="rgSizeDefault" type="radio" name="rgSize" ng-value="rgSizeDefault()" ng-model="rgSize">
        Default
        </label>
        <label for"rgSizeMax">
          <input id="rgSizeMax" type="radio" name="rgSize" ng-value="rgSizeMax()" ng-model="rgSize">
        Max
        </label>
        <!-- <label for"rgSizeOther">
          <input id="rgSizeOther" type="radio" name="rgSize" ng-value="" ng-model="rgSize">
        Other
        </label> -->
      </form>

      <br>

      <label for="selectedDrive">Select Drive:</label>
      <select  name="selectedDrive" ng-model="selectedDrive" ng-options="(drive.mkt_size + ' GB - ' + drive.type) for drive in drives | unique:'right_size_mib' | orderBy:'-mkt_size'"></select>
      <br>

      <label for="selectedRaidType">Select RAID Type:</label>
      <select name="selectedRaidType" ng-model="selectedRaidType" ng-options="(raid.displayName) for raid in raidTypes"></select>
      <br>

      <label for="aggrReserve">Aggregate Reserve %:</label>
      <input type="number" name="aggrReserve" ng-model="aggrReserve">
      <br>

      <label for="snapReserve">Snapshot Reserve %:</label>
      <input type="number" name="snapReserve" ng-model="snapReserve">
      <br>
      <!-- waflReserve should not be configurable -->
      <label for="waflReserve">WAFL Reserve %:</label>
      <input type="number" name="waflReserve" ng-model="waflReserve">
      <br>

      <label for="selectedOutputUnit">Select Output Unit:</label>
      <select name="selectedOutputUnit" ng-model="selectedOutputUnit" ng-options="unit.iec as unit.displayName for unit in outputUnits | filter:{base:2}"></select>
      <br>
      <br>

      <hr><br>

      <!-- Calculated Outputs -->
      <br>Outputs:<br><br>
      Total Base 10 Capacity: {{ totalRawCapacity() | base10convert:2:'GB' }} <br>
      Total Base 2 Capacity: {{ totalPhysicalCapacity() | base2convert:2:'MiB':selectedOutputUnit }} <br>
      Total Right Size Capacity: {{ totalRightSizeCapacity() | base2convert:2:'MiB':selectedOutputUnit }} <br>
      <br>
      Aggregate Usable Capacity: {{ aggrCapacity() | base2convert:2:'MiB':selectedOutputUnit }} <br>
      Volume Usable Capacity: {{ volumeCapacity() | base2convert:2:'MiB':selectedOutputUnit }} <br>
      <br>
      <!-- End Calculated Outputs -->

      Usable Drives: {{ usableDrives() }} <br>
      RG Size: {{ rgSize }} <br>
      Number of Raid Groups: {{ numRaidGroups() }} <br>
      Parity Drives: {{ parityDrives() }} <br>
      Data Drives: {{ dataDrives() }} <br>
      <br>
      ---------------<br>
      Deficiency: {{ rgDeficiency() }} <br>
      DD's per RG: {{ dataDrivesPerRaidGroup() }} <br>
      Warning: {{ deficiencyWarning() }} <br>
      ---------------<br>
      Total Drive Efficiency: {{ totalDriveEfficiency() | number:2 }}% <br>
      Usable Drive Efficiency: {{ usableDriveEfficiency() | number:2 }}% <br>
      <br>

      RG Size Max: {{ rgSizeMax() }} <br>
      RG Size Default: {{ rgSizeDefault() }} <br>
      RG Size Min: {{ rgSizeMin() }} <br>
      <br>
      <!-- Selected Drive Details -->
      <p>Model #: {{ selectedDrive.model_num }}</p>
      <p>Marketed Size: {{ selectedDrive.mkt_size }} GB</p>
      <p>Physical Size: {{ selectedDrive.physical_size_mib | number }} MiB</p>
      <p>Right Size: {{ selectedDrive.right_size_mib | number}} MiB</p>
      <p>Drive Type: {{ selectedDrive.type }}</p>
      <p>Drive Speed: {{ selectedDrive.rpm_speed | number }} RPM</p>

      <!-- End Selected Drive Details -->


    </div> <!-- End Calculator.html -->


    <!-- <div ng-include="'drive_table.html'"></div>  -->
  </body>

</html>
